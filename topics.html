<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Topics - OCR Computer Science Revision</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        .topic-card {
            transition: all 0.3s ease;
            border: 1px solid #E2E8F0;
        }
        .topic-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .difficulty-foundation { background: #68D391; }
        .difficulty-intermediate { background: #F6AD55; }
        .difficulty-advanced { background: #FC8181; }
        .nav-link {
            transition: all 0.2s ease;
            position: relative;
        }
        .nav-link:hover {
            color: #3182CE;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: #3182CE;
            transition: width 0.3s ease;
        }
        .nav-link:hover::after {
            width: 100%;
        }
        .nav-link.active {
            color: #3182CE;
        }
        .nav-link.active::after {
            width: 100%;
        }
        .filter-btn {
            transition: all 0.2s ease;
        }
        .filter-btn.active {
            background: #3182CE;
            color: white;
        }
        .search-input {
            transition: all 0.2s ease;
        }
        .search-input:focus {
            border-color: #3182CE;
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
        }
        .topic-expanded {
            max-height: 1000px;
            transition: max-height 0.3s ease;
        }
        .topic-collapsed {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-6xl mx-auto px-6">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-4">
                    <h1 class="text-xl font-bold text-gray-800">Revision Timeline</h1>
                    <span class="mono text-sm text-gray-500">OCR Computer Science</span>
                </div>
                <nav class="hidden md:flex space-x-8">
                    <a href="index.html" class="nav-link text-gray-700 font-medium">Timeline</a>
                    <a href="topics.html" class="nav-link text-gray-700 font-medium active">Topics</a>
                    <a href="progress.html" class="nav-link text-gray-700 font-medium">Progress</a>
                </nav>
                <div class="md:hidden">
                    <button id="mobile-menu-btn" class="text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden md:hidden bg-white border-b border-gray-200">
        <div class="px-6 py-4 space-y-2">
            <a href="index.html" class="block text-gray-700 font-medium py-2">Timeline</a>
            <a href="topics.html" class="block text-gray-700 font-medium py-2">Topics</a>
            <a href="progress.html" class="block text-gray-700 font-medium py-2">Progress</a>
        </div>
    </div>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-6 py-8">
        <!-- Page Header -->
        <div class="text-center mb-8">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">Learning Objectives</h2>
            <p class="text-gray-600 max-w-2xl mx-auto">
                Explore all 156 learning objectives organized by topic, difficulty, and component. 
                Search, filter, and track your progress through the complete OCR Computer Science curriculum.
            </p>
        </div>

        <!-- Search and Filters -->
        <section class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8">
            <!-- Search Bar -->
            <div class="mb-6">
                <div class="relative max-w-md mx-auto">
                    <input 
                        type="text" 
                        id="search-input"
                        placeholder="Search learning objectives..."
                        class="search-input w-full px-4 py-3 pl-10 border border-gray-300 rounded-lg focus:outline-none"
                    >
                    <svg class="absolute left-3 top-3.5 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                </div>
            </div>

            <!-- Filter Buttons -->
            <div class="flex flex-wrap justify-center gap-4">
                <!-- Difficulty Filters -->
                <div class="flex flex-wrap gap-2">
                    <button class="filter-btn px-4 py-2 rounded-lg border border-gray-300 text-sm font-medium" data-filter="difficulty" data-value="all">
                        All Levels
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-lg border border-gray-300 text-sm font-medium" data-filter="difficulty" data-value="foundation">
                        Foundation
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-lg border border-gray-300 text-sm font-medium" data-filter="difficulty" data-value="intermediate">
                        Intermediate
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-lg border border-gray-300 text-sm font-medium" data-filter="difficulty" data-value="advanced">
                        Advanced
                    </button>
                </div>

                <!-- Component Filters -->
                <div class="flex flex-wrap gap-2">
                    <button class="filter-btn px-4 py-2 rounded-lg border border-gray-300 text-sm font-medium" data-filter="component" data-value="all">
                        All Components
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-lg border border-gray-300 text-sm font-medium" data-filter="component" data-value="01">
                        Computer Systems
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-lg border border-gray-300 text-sm font-medium" data-filter="component" data-value="02">
                        Algorithms & Programming
                    </button>
                </div>

                <!-- Status Filters -->
                <div class="flex flex-wrap gap-2">
                    <button class="filter-btn px-4 py-2 rounded-lg border border-gray-300 text-sm font-medium" data-filter="status" data-value="all">
                        All Topics
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-lg border border-gray-300 text-sm font-medium" data-filter="status" data-value="completed">
                        Completed
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-lg border border-gray-300 text-sm font-medium" data-filter="status" data-value="pending">
                        Pending
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-lg border border-gray-300 text-sm font-medium" data-filter="status" data-value="review">
                        Needs Review
                    </button>
                </div>
            </div>
        </section>

        <!-- Results Summary -->
        <div class="text-center mb-6">
            <p class="text-gray-600">
                Showing <span id="results-count" class="font-semibold">0</span> of 
                <span id="total-count" class="font-semibold">156</span> learning objectives
            </p>
        </div>

        <!-- Topics Grid -->
        <section id="topics-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Topic cards will be generated here -->
        </section>

        <!-- Load More Button -->
        <div class="text-center mt-8">
            <button id="load-more-btn" class="hidden bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                Load More Topics
            </button>
        </div>

        <!-- No Results Message -->
        <div id="no-results" class="hidden text-center py-12">
            <div class="text-gray-400 mb-4">
                <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                </svg>
            </div>
            <h3 class="text-xl font-semibold text-gray-600 mb-2">No topics found</h3>
            <p class="text-gray-500">Try adjusting your search or filter criteria</p>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-16">
        <div class="max-w-6xl mx-auto px-6 py-8">
            <div class="text-center text-gray-500">
                <p class="mono text-sm">OCR Computer Science A-Level Revision Timeline</p>
                <p class="text-xs mt-2">Built with modern web technologies for effective study planning</p>
            </div>
        </div>
    </footer>

    <script src="data.js"></script>
    <script>
        // Topics Page Specific Logic
        class TopicsPage {
            constructor() {
                this.currentFilters = {
                    difficulty: 'all',
                    component: 'all',
                    status: 'all'
                };
                this.searchQuery = '';
                this.displayedTopics = 0;
                this.topicsPerPage = 12;
                this.allTopics = [];
                this.filteredTopics = [];
                this.init();
            }

            async init() {
                await revisionData.init();
                this.allTopics = revisionData.learningObjectives;
                this.filteredTopics = [...this.allTopics];
                this.bindEvents();
                this.renderTopics();
                this.updateResultsCount();
            }

            bindEvents() {
                // Mobile menu toggle
                const mobileMenuBtn = document.getElementById('mobile-menu-btn');
                const mobileMenu = document.getElementById('mobile-menu');
                
                if (mobileMenuBtn && mobileMenu) {
                    mobileMenuBtn.addEventListener('click', () => {
                        mobileMenu.classList.toggle('hidden');
                    });
                }

                // Search input
                const searchInput = document.getElementById('search-input');
                if (searchInput) {
                    searchInput.addEventListener('input', (e) => {
                        this.searchQuery = e.target.value.toLowerCase();
                        this.applyFilters();
                    });
                }

                // Filter buttons
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const filterType = e.target.dataset.filter;
                        const filterValue = e.target.dataset.value;
                        
                        // Update active state
                        document.querySelectorAll(`[data-filter="${filterType}"]`).forEach(b => {
                            b.classList.remove('active');
                        });
                        e.target.classList.add('active');
                        
                        // Update filter
                        this.currentFilters[filterType] = filterValue;
                        this.applyFilters();
                    });
                });

                // Load more button
                const loadMoreBtn = document.getElementById('load-more-btn');
                if (loadMoreBtn) {
                    loadMoreBtn.addEventListener('click', () => {
                        this.displayedTopics += this.topicsPerPage;
                        this.renderTopics();
                    });
                }

                // Set initial active states
                document.querySelector('[data-filter="difficulty"][data-value="all"]').classList.add('active');
                document.querySelector('[data-filter="component"][data-value="all"]').classList.add('active');
                document.querySelector('[data-filter="status"][data-value="all"]').classList.add('active');
            }

            applyFilters() {
                this.filteredTopics = this.allTopics.filter(topic => {
                    // Search filter
                    if (this.searchQuery && !topic.objective.toLowerCase().includes(this.searchQuery) &&
                        !topic.topicTitle.toLowerCase().includes(this.searchQuery) &&
                        !topic.subtopicTitle.toLowerCase().includes(this.searchQuery) &&
                        !topic.componentTitle.toLowerCase().includes(this.searchQuery)) {
                        return false;
                    }

                    // Difficulty filter
                    if (this.currentFilters.difficulty !== 'all' && topic.difficulty !== this.currentFilters.difficulty) {
                        return false;
                    }

                    // Component filter
                    if (this.currentFilters.component !== 'all' && topic.componentId !== this.currentFilters.component) {
                        return false;
                    }

                    // Status filter
                    if (this.currentFilters.status !== 'all') {
                        if (this.currentFilters.status === 'completed' && !topic.completed) return false;
                        if (this.currentFilters.status === 'pending' && topic.completed) return false;
                        if (this.currentFilters.status === 'review' && !topic.needsReview) return false;
                    }

                    return true;
                });

                this.displayedTopics = 0;
                this.renderTopics();
                this.updateResultsCount();
            }

            renderTopics() {
                const container = document.getElementById('topics-container');
                const noResults = document.getElementById('no-results');
                const loadMoreBtn = document.getElementById('load-more-btn');

                if (!container) return;

                if (this.filteredTopics.length === 0) {
                    container.innerHTML = '';
                    noResults.classList.remove('hidden');
                    loadMoreBtn.classList.add('hidden');
                    return;
                }

                noResults.classList.add('hidden');

                const topicsToShow = this.filteredTopics.slice(this.displayedTopics, this.displayedTopics + this.topicsPerPage);
                
                if (this.displayedTopics === 0) {
                    container.innerHTML = '';
                }

                topicsToShow.forEach((topic, index) => {
                    const topicCard = this.createTopicCard(topic);
                    container.appendChild(topicCard);
                    
                    // Animate card appearance
                    anime({
                        targets: topicCard,
                        translateY: [30, 0],
                        opacity: [0, 1],
                        duration: 500,
                        delay: index * 50,
                        easing: 'easeOutQuad'
                    });
                });

                this.displayedTopics += topicsToShow.length;

                // Show/hide load more button
                if (this.displayedTopics < this.filteredTopics.length) {
                    loadMoreBtn.classList.remove('hidden');
                } else {
                    loadMoreBtn.classList.add('hidden');
                }
            }

            createTopicCard(topic) {
                const card = document.createElement('div');
                card.className = 'topic-card bg-white rounded-lg shadow-sm p-6';
                
                const difficultyColors = {
                    foundation: 'bg-green-100 text-green-800',
                    intermediate: 'bg-yellow-100 text-yellow-800',
                    advanced: 'bg-red-100 text-red-800'
                };

                const typeIcons = {
                    knowledge: 'ðŸ“š',
                    understanding: 'ðŸ’¡',
                    application: 'ðŸ› ï¸',
                    analysis: 'ðŸ”',
                    evaluation: 'âš–ï¸'
                };

                card.innerHTML = `
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center space-x-2">
                            <span class="text-lg">${typeIcons[topic.type] || 'ðŸ“–'}</span>
                            <span class="px-2 py-1 rounded-full text-xs font-medium ${difficultyColors[topic.difficulty]}">
                                ${topic.difficulty.toUpperCase()}
                            </span>
                        </div>
                        <div class="flex items-center space-x-2">
                            ${topic.completed ? 
                                '<span class="text-green-500 text-lg">âœ“</span>' : 
                                topic.needsReview ? 
                                '<span class="text-yellow-500 text-lg">âš </span>' : 
                                '<span class="text-gray-300 text-lg">â—‹</span>'
                            }
                        </div>
                    </div>
                    
                    <h3 class="font-semibold text-gray-800 mb-2 line-clamp-3">${topic.objective}</h3>
                    
                    <div class="text-sm text-gray-600 mb-4">
                        <div class="font-medium">${topic.componentTitle}</div>
                        <div>${topic.topicTitle}</div>
                        <div class="text-xs text-gray-500">${topic.subtopicTitle}</div>
                    </div>
                    
                    <div class="flex justify-between items-center text-xs text-gray-500 mb-4">
                        <span>ID: ${topic.objectiveId}</span>
                        <span>${topic.type.charAt(0).toUpperCase() + topic.type.slice(1)}</span>
                    </div>
                    
                    ${topic.scheduledDate ? 
                        `<div class="text-xs text-blue-600 mb-4">
                            Scheduled: ${new Date(topic.scheduledDate).toLocaleDateString('en-GB')}
                        </div>` : 
                        ''
                    }
                    
                    <div class="flex space-x-2">
                        <button class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-3 rounded text-sm font-medium transition-colors" 
                                onclick="this.markTopicCompleted('${topic.id}')">
                            ${topic.completed ? 'Completed' : 'Mark Complete'}
                        </button>
                        <button class="bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-3 rounded text-sm font-medium transition-colors"
                                onclick="this.toggleTopicDetails('${topic.id}')">
                            Details
                        </button>
                    </div>
                    
                    <div id="details-${topic.id}" class="topic-collapsed mt-4 pt-4 border-t border-gray-200">
                        <div class="text-sm text-gray-600">
                            <div class="mb-2"><strong>Component:</strong> ${topic.componentTitle}</div>
                            <div class="mb-2"><strong>Topic:</strong> ${topic.topicTitle}</div>
                            <div class="mb-2"><strong>Subtopic:</strong> ${topic.subtopicTitle}</div>
                            <div class="mb-2"><strong>Learning Objective:</strong></div>
                            <div class="text-gray-700">${topic.objective}</div>
                        </div>
                    </div>
                `;

                return card;
            }

            markTopicCompleted(topicId) {
                revisionData.markTopicCompleted(topicId);
                this.applyFilters(); // Refresh display
            }

            toggleTopicDetails(topicId) {
                const detailsElement = document.getElementById(`details-${topicId}`);
                if (detailsElement) {
                    if (detailsElement.classList.contains('topic-collapsed')) {
                        detailsElement.classList.remove('topic-collapsed');
                        detailsElement.classList.add('topic-expanded');
                    } else {
                        detailsElement.classList.remove('topic-expanded');
                        detailsElement.classList.add('topic-collapsed');
                    }
                }
            }

            updateResultsCount() {
                const resultsCount = document.getElementById('results-count');
                const totalCount = document.getElementById('total-count');
                
                if (resultsCount) {
                    resultsCount.textContent = this.filteredTopics.length;
                }
                
                if (totalCount) {
                    totalCount.textContent = this.allTopics.length;
                }
            }
        }

        // Initialize topics page when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            window.topicsPage = new TopicsPage();
        });
    </script>
</body>
</html>